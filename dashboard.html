<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>슈퍼문 로드맵 - 대시보드</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;600;700;800&display=swap"
        rel="stylesheet">
    <style>
        body {
            font-family: 'Pretendard', sans-serif;
        }

        .glass-panel {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .sidebar-link {
            transition: all 0.2s;
            cursor: pointer;
            text-decoration: none;
        }

        .sidebar-link:hover,
        .sidebar-link.active {
            background: rgba(59, 130, 246, 0.15);
            color: #60a5fa;
            border-right: 3px solid #60a5fa;
        }
    </style>
    <script>
        tailwind.config = {
            theme: { extend: { colors: { dark: '#0f172a', card: '#1e293b' } } }
        }
    </script>
</head>

<body class="bg-dark text-white min-h-screen flex flex-col lg:flex-row shadow-2xl relative overflow-x-hidden">
    <script src="sidebar.js"></script>
    <script>renderSidebar('dashboard');</script>

    <main class="flex-1 min-h-screen bg-dark p-4 lg:p-8 relative">
        <section id="dashboard" class="max-w-7xl mx-auto block">
            <header class="mb-8 flex justify-between items-center">
                <div>
                    <h2 class="text-3xl font-bold mb-2">대시보드</h2>
                    <p class="text-gray-400">자산 흐름 요약</p>
                </div>
                <div class="flex gap-4">
                    <!-- Year Selector -->
                    <div class="flex items-center bg-card rounded-lg p-1 border border-white/10">
                        <button onclick="changeYear(-1)"
                            class="px-3 py-1 hover:bg-white/10 rounded-md text-gray-400 hover:text-white transition">◀</button>
                        <span id="dashboardYearDisplay"
                            class="px-4 font-bold text-lg min-w-[80px] text-center">2026</span>
                        <button onclick="changeYear(1)"
                            class="px-3 py-1 hover:bg-white/10 rounded-md text-gray-400 hover:text-white transition">▶</button>
                    </div>
                    <!-- Month Selector -->
                    <div class="flex items-center bg-card rounded-lg p-1 border border-white/10">
                        <button onclick="changeMonth(-1)"
                            class="px-3 py-1 hover:bg-white/10 rounded-md text-gray-400 hover:text-white transition">◀</button>
                        <span id="dashboardMonthDisplay"
                            class="px-4 font-bold text-lg min-w-[60px] text-center">1월</span>
                        <button onclick="changeMonth(1)"
                            class="px-3 py-1 hover:bg-white/10 rounded-md text-gray-400 hover:text-white transition">▶</button>
                    </div>
                </div>
            </header>

            <!-- Memo Container -->
            <div id="memoContainer" class="mt-1 mb-8"></div>

            <!-- Top Cards (KPI) -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="glass-panel rounded-2xl p-6">
                    <h3 class="text-xs font-medium text-gray-400 mb-1" id="kpi-title-net">1월 순수익</h3>
                    <div class="text-2xl font-bold text-white tracking-tight" id="kpi-net-income">0원</div>
                    <div class="mt-2 text-xs text-green-400 flex items-center"><span class="text-gray-500">지출 제외 실질
                            수익</span></div>
                </div>
                <div class="glass-panel rounded-2xl p-6">
                    <h3 class="text-xs font-medium text-gray-400 mb-1" id="kpi-title-rev">1월 총 수입</h3>
                    <div class="text-2xl font-bold text-white tracking-tight" id="kpi-revenue">0원</div>
                    <div class="mt-2 text-xs text-purple-400">변동 + 고정 수입 합계</div>
                </div>
                <div class="glass-panel rounded-2xl p-6">
                    <h3 class="text-xs font-medium text-gray-400 mb-1" id="kpi-title-exp">1월 총 지출</h3>
                    <div class="text-2xl font-bold text-white tracking-tight" id="kpi-expense">0원</div>
                    <div class="mt-2 text-xs text-red-400">절약이 곧 수익입니다</div>
                </div>
                <div class="glass-panel rounded-2xl p-6">
                    <h3 class="text-xs font-medium text-gray-400 mb-1" id="kpi-title-rate">1월 달성률</h3>
                    <div class="text-2xl font-bold text-white tracking-tight" id="kpi-rate">0%</div>
                    <div class="mt-2 text-xs text-blue-400">예산 대비 정산 기준</div>
                </div>
            </div>

            <!-- Comparison Chart -->
            <div class="glass-panel rounded-2xl p-6 mb-8">
                <h3 class="text-lg font-semibold mb-6">카테고리별 지출 비교 (전월 vs 당월)</h3>
                <div class="h-80 w-full relative">
                    <canvas id="comparisonChart"></canvas>
                </div>
            </div>


        </section>
    </main>

    <!-- Firebase SDKs (Compat) -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="firebase_init.js"></script>
    <script src="data.js"></script>
    <script src="dashboard.js"></script>
</body>

</html>